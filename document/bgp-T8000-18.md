# T8000-18 BGP

```ruby
@sign << ['T8000-18', '宣告网段解析']

module T8000_18
  module_function

  def 宣告网段解析 配置散列
    ranges = []
    segment = 配置散列['bgp']
    segment.split("\n").each do|line|
      if line.include?('network ') && line.strip.split(' ').size > 2
        words = line.split(' ')
        address, netmask = line.split(' ')[1].include?(':') ? IP.v6("#{words[1]}/#{words[2]}") : IP.v4("#{words[1]}/#{words[2]}")
        network = address.network_with netmask
        route_map = words.index('route-map') ? words[words.index('route-map')+1] : ''
        ranges << [ 'bgp', network.to_s, netmask.to_s, route_map ]
      end
    end
    return ranges
  end
end
```